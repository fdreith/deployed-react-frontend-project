{"ast":null,"code":"export const fetchComments = () => {\n  return dispatch => {\n    return fetch(\"http://localhost:3001/api/v1/comments\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(resp => resp.json()).then(response => {\n      if (response.error) {\n        // alert(response.error)\n        console.log(response.error);\n      } else {\n        dispatch(setComments(response.data));\n      }\n    }).catch(console.log);\n  };\n};\nexport const setComments = comments => {\n  return {\n    type: \"SET_COMMENTS\",\n    comments\n  };\n};\nexport const postComment = comment => {\n  return dispatch => {\n    return fetch(\"http://localhost:3001/api/v1/comments\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify(comment)\n    }).then(resp => resp.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(addComment(response));\n      }\n    }); // .catch(alert) \n  };\n};\nexport const addComment = comment => {\n  return {\n    type: \"ADD_COMMENT\",\n    comment\n  };\n};\nexport const deleteComment = (commentId, history) => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/api/v1/tasks/${commentId}`, {\n      method: \"DELETE\"\n    }).then(resp => resp.json()).then(response => {\n      if (response.message) {\n        history.push('/');\n        alert(response.message);\n        dispatch(deleteTaskStore(taskId));\n      } else {\n        throw new Error(response.errors);\n      }\n    }); // .catch(alert) \n  };\n};\nexport const deleteTaskStore = taskId => {\n  return {\n    type: \"DELETE_TASK\",\n    taskId\n  };\n};","map":{"version":3,"sources":["/Users/francescadreith/development/projects/react-redux-project/react-project-frontend/src/actions/comments.js"],"names":["fetchComments","dispatch","fetch","method","headers","then","resp","json","response","error","console","log","setComments","data","catch","comments","type","postComment","comment","body","JSON","stringify","alert","addComment","deleteComment","commentId","history","message","push","deleteTaskStore","taskId","Error","errors"],"mappings":"AAAA,OAAO,MAAMA,aAAa,GAAG,MAAM;AACjC,SAAOC,QAAQ,IAAI;AACjB,WAAOC,KAAK,CAAC,uCAAD,EAA0C;AACpDC,MAAAA,MAAM,EAAE,KAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAF2C,KAA1C,CAAL,CAMJC,IANI,CAMCC,IAAI,IAAIA,IAAI,CAACC,IAAL,EANT,EAOJF,IAPI,CAOCG,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,KAAb,EAAoB;AAClB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACC,KAArB;AACD,OAHD,MAGO;AACLR,QAAAA,QAAQ,CAACW,WAAW,CAACJ,QAAQ,CAACK,IAAV,CAAZ,CAAR;AACD;AACF,KAdI,EAeJC,KAfI,CAeEJ,OAAO,CAACC,GAfV,CAAP;AAgBD,GAjBD;AAkBD,CAnBM;AAqBP,OAAO,MAAMC,WAAW,GAAGG,QAAQ,IAAI;AACrC,SAAO;AACLC,IAAAA,IAAI,EAAE,cADD;AAELD,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAME,WAAW,GAAGC,OAAO,IAAI;AACpC,SAAOjB,QAAQ,IAAI;AACjB,WAAOC,KAAK,CAAC,uCAAD,EAA0C;AACpDC,MAAAA,MAAM,EAAE,MAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,kBAAU;AAFH,OAF2C;AAMpDe,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,OAAf;AAN8C,KAA1C,CAAL,CAQJb,IARI,CAQCC,IAAI,IAAIA,IAAI,CAACC,IAAL,EART,EASJF,IATI,CASCG,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,KAAb,EAAoB;AAClBa,QAAAA,KAAK,CAACd,QAAQ,CAACC,KAAV,CAAL;AACD,OAFD,MAEO;AACLR,QAAAA,QAAQ,CAACsB,UAAU,CAACf,QAAD,CAAX,CAAR;AACD;AACF,KAfI,CAAP,CADiB,CAiBjB;AACD,GAlBD;AAmBD,CApBM;AAsBP,OAAO,MAAMe,UAAU,GAAGL,OAAO,IAAI;AACnC,SAAO;AACLF,IAAAA,IAAI,EAAE,aADD;AAELE,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAMM,aAAa,GAAG,CAACC,SAAD,EAAYC,OAAZ,KAAwB;AACnD,SAAOzB,QAAQ,IAAI;AACjB,WAAOC,KAAK,CAAE,sCAAqCuB,SAAU,EAAjD,EAAoD;AAC9DtB,MAAAA,MAAM,EAAE;AADsD,KAApD,CAAL,CAGJE,IAHI,CAGCC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAHT,EAIJF,IAJI,CAICG,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACmB,OAAb,EAAsB;AACpBD,QAAAA,OAAO,CAACE,IAAR,CAAa,GAAb;AACAN,QAAAA,KAAK,CAACd,QAAQ,CAACmB,OAAV,CAAL;AACA1B,QAAAA,QAAQ,CAAC4B,eAAe,CAACC,MAAD,CAAhB,CAAR;AACD,OAJD,MAIO;AACL,cAAM,IAAIC,KAAJ,CAAUvB,QAAQ,CAACwB,MAAnB,CAAN;AACD;AACF,KAZI,CAAP,CADiB,CAcjB;AACD,GAfD;AAgBD,CAjBM;AAmBP,OAAO,MAAMH,eAAe,GAAGC,MAAM,IAAI;AACvC,SAAO;AACLd,IAAAA,IAAI,EAAE,aADD;AAELc,IAAAA;AAFK,GAAP;AAID,CALM","sourcesContent":["export const fetchComments = () => {\n  return dispatch => {\n    return fetch(\"http://localhost:3001/api/v1/comments\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(resp => resp.json())\n      .then(response => {\n        if (response.error) {\n          // alert(response.error)\n          console.log(response.error)\n        } else {\n          dispatch(setComments(response.data))\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const setComments = comments => {\n  return {\n    type: \"SET_COMMENTS\",\n    comments\n  }\n}\n\nexport const postComment = comment => {\n  return dispatch => {\n    return fetch(\"http://localhost:3001/api/v1/comments\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify(comment)\n    })\n      .then(resp => resp.json())\n      .then(response => {\n        if (response.error) {\n          alert(response.error)\n        } else {\n          dispatch(addComment(response))\n        }\n      })\n    // .catch(alert) \n  }\n}\n\nexport const addComment = comment => {\n  return {\n    type: \"ADD_COMMENT\",\n    comment\n  }\n}\n\nexport const deleteComment = (commentId, history) => {\n  return dispatch => {\n    return fetch(`http://localhost:3001/api/v1/tasks/${commentId}`, {\n      method: \"DELETE\",\n    })\n      .then(resp => resp.json())\n      .then(response => {\n        if (response.message) {\n          history.push('/')\n          alert(response.message)\n          dispatch(deleteTaskStore(taskId))\n        } else {\n          throw new Error(response.errors)\n        }\n      })\n    // .catch(alert) \n  }\n}\n\nexport const deleteTaskStore = taskId => {\n  return {\n    type: \"DELETE_TASK\",\n    taskId\n  }\n}"]},"metadata":{},"sourceType":"module"}