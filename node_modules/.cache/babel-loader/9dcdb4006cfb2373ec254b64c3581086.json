{"ast":null,"code":"export default ((state = {\n  myTasks: [],\n  assignedTasks: [],\n  completedTasks: []\n}, action) => {\n  const isMyTask = task => {\n    return task.attributes.user.id === task.attributes.owner.id;\n  };\n\n  const isInMyTaskState = taskId => {\n    return state.myTasks.find(task => parseInt(task.id) === taskId);\n  };\n\n  switch (action.type) {\n    case 'SET_TASKS':\n      const tasks = convertDates(action.tasks);\n      filterTasks(tasks);\n      return {\n        myTasks,\n        assignedTasks,\n        completedTasks\n      };\n\n    case 'ADD_TASK':\n      const newTask = convertDates(action.task);\n\n      if (isMyTask(action.task)) {\n        const myTasks = sortByDate([...state.myTasks, newTask]);\n        return { ...state,\n          myTasks\n        };\n      } else {\n        const assignedTasks = sortByDate([...state.assignedTasks, newTask]);\n        return { ...state,\n          assignedTasks\n        };\n      }\n\n    case 'UPDATE_TASK':\n      const convertedTask = convertDates(action.task);\n\n      if (isInMyTaskState(action.task.attributes.id)) {\n        if (isMyTask(action.task)) {\n          const myTasks = sortByDate(state.myTasks.map(task => replaceIfEqual(task, convertedTask)));\n          return { ...state,\n            myTasks\n          };\n        } else {\n          const newMyTasks = sortByDate(state.myTasks.filter(task => parseInt(task.id) !== action.task.attributes.id));\n          return { ...state,\n            myTasks: newMyTasks,\n            assignedTasks: [...state.assignedTasks, convertedTask]\n          };\n        }\n      } else {\n        if (isMyTask(action.task)) {\n          const newAssignedTasks = sortByDate(state.assignedTasks.filter(task => parseInt(task.id) !== action.task.attributes.id));\n          return { ...state,\n            myTasks: [...state.myTasks, convertedTask],\n            assignedTasks: newAssignedTasks\n          };\n        } else {\n          const assignedTasks = sortByDate(state.assignedTasks.map(task => replaceIfEqual(task, convertedTask)));\n          return { ...state,\n            assignedTasks\n          };\n        }\n      }\n\n    case 'COMPLETED_TASK':\n      if (isInMyTaskState(action.task.attributes.id)) {\n        const myTasks = state.myTasks.filter(task => task.id !== action.task.id);\n        const completedTasks = [...state.completedTasks, action.task];\n        return { ...state,\n          myTasks,\n          completedTasks\n        };\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => task.id !== action.task.id);\n        return { ...state,\n          assignedTasks\n        };\n      }\n\n    case 'DELETE_TASK':\n      if (isInMyTaskState(action.taskId)) {\n        const myTasks = state.myTasks.filter(task => parseInt(task.id) !== action.taskId);\n        return { ...state,\n          myTasks\n        };\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => parseInt(task.id) !== action.taskId);\n        return { ...state,\n          assignedTasks\n        };\n      }\n\n    case 'UPDATE_PRIORITY':\n      const updatePriority = {\n        priority: action.task.counter + 1\n      };\n      const prioritizedTask = { ...action.task.task,\n        ...updatePriority\n      };\n\n      if (isInMyTaskState(action.task.task.attributes.id)) {\n        const myTasks = state.myTasks.map(task => {\n          return replaceIfEqual(task, prioritizedTask);\n        });\n        return { ...state,\n          myTasks\n        };\n      } else {\n        const assignedTasks = state.assignedTasks.map(task => {\n          return replaceIfEqual(task, prioritizedTask);\n        });\n        return { ...state,\n          assignedTasks\n        };\n      }\n\n    default:\n      return state;\n  }\n});\n\nconst filterTasks = tasks => {\n  const assignedTasks = sortByDate(tasks.filter(task => task.type === \"assigned_task\").filter(task => task.relationships.user.data.id !== task.relationships.owner.data.id).filter(task => task.attributes.completed === false));\n  const myTasks = sortByDate(tasks.filter(task => task.type === \"task\").filter(task => task.attributes.completed === false));\n  const completedTasks = sortByDate(tasks.filter(task => task.attributes.completed === true).filter(task => task.type === \"task\"));\n  return {\n    myTasks,\n    assignedTasks,\n    completedTasks\n  };\n};\n\nconst replaceIfEqual = (task, actionTask) => {\n  if (task.attributes.id === actionTask.attributes.id) {\n    return actionTask;\n  } else {\n    return task;\n  }\n};\n\nconst convertDates = tasks => {\n  if (Array.isArray(tasks)) {\n    return tasks.map(task => {\n      task.attributes.due_date = new Date(task.attributes.due_date);\n      return task;\n    });\n  } else {\n    tasks.attributes.due_date = new Date(tasks.attributes.due_date);\n    return tasks;\n  }\n};\n\nconst sortByDate = tasks => {\n  return tasks.sort(function (a, b) {\n    const dueDateA = a.attributes.due_date;\n    const dueDateB = b.attributes.due_date;\n\n    if (dueDateA < dueDateB) {\n      return -1;\n    }\n\n    if (dueDateA > dueDateB) {\n      return 1;\n    }\n\n    return 0;\n  });\n};","map":{"version":3,"sources":["/Users/francescadreith/development/projects/react-redux-project/react-project-frontend/src/reducers/tasks.js"],"names":["state","myTasks","assignedTasks","completedTasks","action","isMyTask","task","attributes","user","id","owner","isInMyTaskState","taskId","find","parseInt","type","tasks","convertDates","filterTasks","newTask","sortByDate","convertedTask","map","replaceIfEqual","newMyTasks","filter","newAssignedTasks","updatePriority","priority","counter","prioritizedTask","relationships","data","completed","actionTask","Array","isArray","due_date","Date","sort","a","b","dueDateA","dueDateB"],"mappings":"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","sourcesContent":["export default (state = {\n  myTasks: [], assignedTasks: [], completedTasks: []\n}, action) => {\n\n  const isMyTask = (task) => {\n    return task.attributes.user.id === task.attributes.owner.id\n  }\n\n  const isInMyTaskState = taskId => {\n    return state.myTasks.find(task => parseInt(task.id) === taskId)\n  }\n\n  switch (action.type) {\n    case 'SET_TASKS':\n      const tasks = convertDates(action.tasks)\n      filterTasks(tasks)\n      return { myTasks, assignedTasks, completedTasks }\n    case 'ADD_TASK':\n      const newTask = convertDates(action.task)\n      if (isMyTask(action.task)) {\n        const myTasks = sortByDate([...state.myTasks, newTask])\n        return { ...state, myTasks }\n      } else {\n        const assignedTasks = sortByDate([...state.assignedTasks, newTask])\n        return { ...state, assignedTasks }\n      }\n    case 'UPDATE_TASK':\n      const convertedTask = convertDates(action.task)\n      if (isInMyTaskState(action.task.attributes.id)) {\n        if (isMyTask(action.task)) {\n          const myTasks = sortByDate(state.myTasks.map(task => replaceIfEqual(task, convertedTask)))\n          return { ...state, myTasks }\n        } else {\n          const newMyTasks = sortByDate(state.myTasks.filter(task => parseInt(task.id) !== action.task.attributes.id))\n          return { ...state, myTasks: newMyTasks, assignedTasks: [...state.assignedTasks, convertedTask] }\n        }\n      } else {\n        if (isMyTask(action.task)) {\n          const newAssignedTasks = sortByDate(state.assignedTasks.filter(task => parseInt(task.id) !== action.task.attributes.id))\n          return { ...state, myTasks: [...state.myTasks, convertedTask], assignedTasks: newAssignedTasks }\n        }\n        else {\n          const assignedTasks = sortByDate(state.assignedTasks.map(task => replaceIfEqual(task, convertedTask)))\n          return { ...state, assignedTasks }\n        }\n      }\n    case 'COMPLETED_TASK':\n      if (isInMyTaskState(action.task.attributes.id)) {\n        const myTasks = state.myTasks.filter(task => task.id !== action.task.id)\n        const completedTasks = [...state.completedTasks, action.task]\n        return { ...state, myTasks, completedTasks }\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => task.id !== action.task.id)\n        return { ...state, assignedTasks }\n      }\n    case 'DELETE_TASK':\n      if (isInMyTaskState(action.taskId)) {\n        const myTasks = state.myTasks.filter(task => parseInt(task.id) !== action.taskId)\n        return { ...state, myTasks }\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => parseInt(task.id) !== action.taskId)\n        return { ...state, assignedTasks }\n      }\n    case 'UPDATE_PRIORITY':\n      const updatePriority = { priority: action.task.counter + 1 }\n      const prioritizedTask = { ...action.task.task, ...updatePriority }\n      if (isInMyTaskState(action.task.task.attributes.id)) {\n        const myTasks = state.myTasks.map(task => {\n          return replaceIfEqual(task, prioritizedTask)\n        })\n        return { ...state, myTasks }\n      } else {\n        const assignedTasks = state.assignedTasks.map(task => {\n          return replaceIfEqual(task, prioritizedTask)\n        })\n        return { ...state, assignedTasks }\n      }\n    default:\n      return state\n  }\n}\n\nconst filterTasks = (tasks) => {\n  const assignedTasks = sortByDate(tasks.filter(task => task.type === \"assigned_task\")\n    .filter(task => task.relationships.user.data.id !== task.relationships.owner.data.id)\n    .filter(task => task.attributes.completed === false))\n  const myTasks = sortByDate(tasks.filter(task => task.type === \"task\")\n    .filter(task => task.attributes.completed === false))\n  const completedTasks = sortByDate(tasks.filter(task => task.attributes.completed === true)\n    .filter(task => task.type === \"task\"))\n  return { myTasks, assignedTasks, completedTasks }\n}\n\nconst replaceIfEqual = (task, actionTask) => {\n  if (task.attributes.id === actionTask.attributes.id) {\n    return actionTask\n  } else {\n    return task\n  }\n}\n\nconst convertDates = (tasks) => {\n  if (Array.isArray(tasks)) {\n    return tasks.map(task => {\n      task.attributes.due_date = new Date(task.attributes.due_date)\n      return task\n    })\n  } else {\n    tasks.attributes.due_date = new Date(tasks.attributes.due_date)\n    return tasks\n  }\n}\n\nconst sortByDate = (tasks) => {\n  return tasks.sort(function (a, b) {\n    const dueDateA = a.attributes.due_date\n    const dueDateB = b.attributes.due_date\n    if (dueDateA < dueDateB) {\n      return -1\n    }\n    if (dueDateA > dueDateB) {\n      return 1\n    }\n    return 0\n  })\n}\n"]},"metadata":{},"sourceType":"module"}