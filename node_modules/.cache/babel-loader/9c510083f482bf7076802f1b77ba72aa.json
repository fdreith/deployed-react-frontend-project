{"ast":null,"code":"export default ((state = [], action) => {\n  switch (action.type) {\n    case 'SET_TASKS':\n      debugger;\n      const tasks = action.tasks.filter((task, index, self) => index === self.findIndex(t => {\n        debugger;\n        return t.id === task.id;\n      }));\n      const convertedTasks = convertDates(tasks);\n      const sortedTasks = sortByDate(convertedTasks);\n      return sortedTasks;\n\n    case 'ADD_TASK':\n      const newTask = convertDates(action.task);\n      const newTasks = sortByDate([...state, newTask]);\n      return newTasks;\n\n    case 'UPDATE_TASK':\n      const convertedTask = convertDates(action.task);\n      debugger;\n      const updatedTasks = sortByDate(state.map(task => {\n        if (task.attributes.id === convertedTask.attributes.id) {\n          return convertedTask;\n        } else {\n          return task;\n        }\n      }));\n      return updatedTasks;\n\n    case 'DELETE_TASK':\n      const filteredTasks = state.myTasks.filter(task => parseInt(task.id) !== action.taskId);\n      return filteredTasks;\n\n    default:\n      return state;\n  }\n}); // const replaceIfEqual = (task, actionTask) => {\n//   if (task.attributes.id === actionTask.attributes.id) {\n//     return actionTask\n//   } else {\n//     return task\n//   }\n// }\n\nconst convertDates = tasks => {\n  if (Array.isArray(tasks)) {\n    return tasks.map(task => {\n      task.attributes.due_date = new Date(task.attributes.due_date);\n      return task;\n    });\n  } else {\n    tasks.attributes.due_date = new Date(tasks.attributes.due_date);\n    return tasks;\n  }\n};\n\nconst sortByDate = tasks => {\n  return tasks.sort(function (a, b) {\n    const dueDateA = a.attributes.due_date;\n    const dueDateB = b.attributes.due_date;\n\n    if (dueDateA < dueDateB) {\n      return -1;\n    }\n\n    if (dueDateA > dueDateB) {\n      return 1;\n    }\n\n    return 0;\n  });\n};","map":{"version":3,"sources":["/Users/francescadreith/development/projects/react-redux-project/react-project-frontend/src/reducers/tasks.js"],"names":["state","action","type","tasks","filter","task","index","self","findIndex","t","id","convertedTasks","convertDates","sortedTasks","sortByDate","newTask","newTasks","convertedTask","updatedTasks","map","attributes","filteredTasks","myTasks","parseInt","taskId","Array","isArray","due_date","Date","sort","a","b","dueDateA","dueDateB"],"mappings":"AAAA,gBAAe,CAACA,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAErC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,WAAL;AACE;AACA,YAAMC,KAAK,GAAGF,MAAM,CAACE,KAAP,CAAaC,MAAb,CAAoB,CAACC,IAAD,EAAOC,KAAP,EAAcC,IAAd,KAChCD,KAAK,KAAKC,IAAI,CAACC,SAAL,CAAgBC,CAAD,IAAO;AAC9B;AACA,eAAOA,CAAC,CAACC,EAAF,KAASL,IAAI,CAACK,EAArB;AACD,OAHS,CADE,CAAd;AAMA,YAAMC,cAAc,GAAGC,YAAY,CAACT,KAAD,CAAnC;AACA,YAAMU,WAAW,GAAGC,UAAU,CAACH,cAAD,CAA9B;AACA,aAAOE,WAAP;;AACF,SAAK,UAAL;AACE,YAAME,OAAO,GAAGH,YAAY,CAACX,MAAM,CAACI,IAAR,CAA5B;AACA,YAAMW,QAAQ,GAAGF,UAAU,CAAC,CAAC,GAAGd,KAAJ,EAAWe,OAAX,CAAD,CAA3B;AACA,aAAOC,QAAP;;AACF,SAAK,aAAL;AACE,YAAMC,aAAa,GAAGL,YAAY,CAACX,MAAM,CAACI,IAAR,CAAlC;AACA;AACA,YAAMa,YAAY,GAAGJ,UAAU,CAACd,KAAK,CAACmB,GAAN,CAAUd,IAAI,IAAI;AAChD,YAAIA,IAAI,CAACe,UAAL,CAAgBV,EAAhB,KAAuBO,aAAa,CAACG,UAAd,CAAyBV,EAApD,EAAwD;AACtD,iBAAOO,aAAP;AACD,SAFD,MAEO;AACL,iBAAOZ,IAAP;AACD;AACF,OAN+B,CAAD,CAA/B;AAOA,aAAOa,YAAP;;AACF,SAAK,aAAL;AACE,YAAMG,aAAa,GAAGrB,KAAK,CAACsB,OAAN,CAAclB,MAAd,CAAqBC,IAAI,IAAIkB,QAAQ,CAAClB,IAAI,CAACK,EAAN,CAAR,KAAsBT,MAAM,CAACuB,MAA1D,CAAtB;AACA,aAAOH,aAAP;;AACF;AACE,aAAOrB,KAAP;AA/BJ;AAiCD,CAnCD,E,CAqCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMY,YAAY,GAAIT,KAAD,IAAW;AAC9B,MAAIsB,KAAK,CAACC,OAAN,CAAcvB,KAAd,CAAJ,EAA0B;AACxB,WAAOA,KAAK,CAACgB,GAAN,CAAUd,IAAI,IAAI;AACvBA,MAAAA,IAAI,CAACe,UAAL,CAAgBO,QAAhB,GAA2B,IAAIC,IAAJ,CAASvB,IAAI,CAACe,UAAL,CAAgBO,QAAzB,CAA3B;AACA,aAAOtB,IAAP;AACD,KAHM,CAAP;AAID,GALD,MAKO;AACLF,IAAAA,KAAK,CAACiB,UAAN,CAAiBO,QAAjB,GAA4B,IAAIC,IAAJ,CAASzB,KAAK,CAACiB,UAAN,CAAiBO,QAA1B,CAA5B;AACA,WAAOxB,KAAP;AACD;AACF,CAVD;;AAYA,MAAMW,UAAU,GAAIX,KAAD,IAAW;AAC5B,SAAOA,KAAK,CAAC0B,IAAN,CAAW,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChC,UAAMC,QAAQ,GAAGF,CAAC,CAACV,UAAF,CAAaO,QAA9B;AACA,UAAMM,QAAQ,GAAGF,CAAC,CAACX,UAAF,CAAaO,QAA9B;;AACA,QAAIK,QAAQ,GAAGC,QAAf,EAAyB;AACvB,aAAO,CAAC,CAAR;AACD;;AACD,QAAID,QAAQ,GAAGC,QAAf,EAAyB;AACvB,aAAO,CAAP;AACD;;AACD,WAAO,CAAP;AACD,GAVM,CAAP;AAWD,CAZD","sourcesContent":["export default (state = [], action) => {\n\n  switch (action.type) {\n    case 'SET_TASKS':\n      debugger\n      const tasks = action.tasks.filter((task, index, self) =>\n        index === self.findIndex((t) => {\n          debugger\n          return t.id === task.id\n        })\n      )\n      const convertedTasks = convertDates(tasks)\n      const sortedTasks = sortByDate(convertedTasks)\n      return sortedTasks\n    case 'ADD_TASK':\n      const newTask = convertDates(action.task)\n      const newTasks = sortByDate([...state, newTask])\n      return newTasks\n    case 'UPDATE_TASK':\n      const convertedTask = convertDates(action.task)\n      debugger\n      const updatedTasks = sortByDate(state.map(task => {\n        if (task.attributes.id === convertedTask.attributes.id) {\n          return convertedTask\n        } else {\n          return task\n        }\n      }))\n      return updatedTasks\n    case 'DELETE_TASK':\n      const filteredTasks = state.myTasks.filter(task => parseInt(task.id) !== action.taskId)\n      return filteredTasks\n    default:\n      return state\n  }\n}\n\n// const replaceIfEqual = (task, actionTask) => {\n//   if (task.attributes.id === actionTask.attributes.id) {\n//     return actionTask\n//   } else {\n//     return task\n//   }\n// }\n\nconst convertDates = (tasks) => {\n  if (Array.isArray(tasks)) {\n    return tasks.map(task => {\n      task.attributes.due_date = new Date(task.attributes.due_date)\n      return task\n    })\n  } else {\n    tasks.attributes.due_date = new Date(tasks.attributes.due_date)\n    return tasks\n  }\n}\n\nconst sortByDate = (tasks) => {\n  return tasks.sort(function (a, b) {\n    const dueDateA = a.attributes.due_date\n    const dueDateB = b.attributes.due_date\n    if (dueDateA < dueDateB) {\n      return -1\n    }\n    if (dueDateA > dueDateB) {\n      return 1\n    }\n    return 0\n  })\n}\n"]},"metadata":{},"sourceType":"module"}