{"ast":null,"code":"export default ((state = {\n  myTasks: [],\n  assignedTasks: [],\n  completedTasks: []\n}, action) => {\n  const isMyTask = taskOrTaskId => {\n    debugger;\n\n    if (taskOrTaskId.task) {\n      return taskOrTaskId.task.attributes.user.id === taskOrTaskId.task.attributes.owner.id;\n    } else {\n      return state.myTasks.find(task => parseInt(task.id) === taskOrTaskId);\n    }\n  };\n\n  switch (action.type) {\n    case 'SET_TASKS':\n      const tasks = convertDates(action.tasks);\n      const assignedTasks = tasks.filter(task => task.type === \"assigned_task\").filter(task => task.relationships.user.data.id !== task.relationships.owner.data.id).filter(task => task.attributes.completed === false);\n      const myTasks = tasks.filter(task => task.type === \"task\").filter(task => task.attributes.completed === false);\n      const completedTasks = tasks.filter(task => task.attributes.completed === true).filter(task => task.type === \"task\");\n      return {\n        myTasks,\n        assignedTasks,\n        completedTasks\n      };\n\n    case 'ADD_TASK':\n      const newTask = convertDates(action.task);\n\n      if (isMyTask(action)) {\n        return { ...state,\n          myTasks: [...state.myTasks, newTask]\n        };\n      } else {\n        return { ...state,\n          assignedTasks: [...state.assignedTasks, newTask]\n        };\n      }\n\n    case 'UPDATE_TASK':\n      const convertedTask = convertDates(action.task);\n\n      if (isMyTask(action.task.attributes.id)) {\n        if (isMyTask(action.task)) {\n          debugger;\n          const myTasks = state.myTasks.map(task => replaceIfEqual(task, convertedTask));\n          return { ...state,\n            myTasks\n          };\n        } else {\n          debugger; // delete from myTasks & add to assigned Tasks\n\n          const myTasks = state.myTasks.filter(task => parseInt(task.id) !== action.task.attributes.id);\n          return { ...state,\n            myTasks,\n            assignedTasks: [...state.assignedTasks, convertedTask]\n          };\n        }\n      } else {\n        if (isMyTask(action.task)) {\n          debugger; //delete from assignedTasks & add to myTasks\n\n          const assignedTasks = state.assignedTasks.filter(task => task.id !== action.task.attributes.id);\n          return { ...state,\n            assignedTasks,\n            myTasks: [...state.myTasks, convertedTask]\n          };\n        } else {\n          debugger;\n          const assignedTasks = state.assignedTasks.map(task => replaceIfEqual(task, convertedTask));\n          return { ...state,\n            assignedTasks\n          };\n        }\n      }\n\n    case 'COMPLETED_TASK':\n      if (isMyTask(action.task.attributes.id)) {\n        const myTasks = state.myTasks.filter(task => task.id !== action.task.id);\n        const completedTasks = [...state.completedTasks, action.task];\n        return { ...state,\n          myTasks,\n          completedTasks\n        };\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => task.id !== action.task.id);\n        return { ...state,\n          assignedTasks\n        };\n      }\n\n    case 'DELETE_TASK':\n      if (isMyTask(action.taskId)) {\n        const myTasks = state.myTasks.filter(task => parseInt(task.id) !== action.taskId);\n        return { ...state,\n          myTasks\n        };\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => parseInt(task.id) !== action.taskId);\n        return { ...state,\n          assignedTasks\n        };\n      }\n\n    default:\n      return state;\n  }\n});\n\nconst replaceIfEqual = (task, actionTask) => {\n  if (task.id === actionTask.id) {\n    return actionTask;\n  } else {\n    return task;\n  }\n};\n\nconst convertDates = tasks => {\n  if (Array.isArray(tasks)) {\n    return tasks.map(task => {\n      task.attributes.due_date = new Date(task.attributes.due_date);\n      return task;\n    });\n  } else {\n    tasks.attributes.due_date = new Date(tasks.attributes.due_date);\n    return tasks;\n  }\n};","map":{"version":3,"sources":["/Users/francescadreith/development/projects/react-redux-project/react-project-frontend/src/reducers/tasks.js"],"names":["state","myTasks","assignedTasks","completedTasks","action","isMyTask","taskOrTaskId","task","attributes","user","id","owner","find","parseInt","type","tasks","convertDates","filter","relationships","data","completed","newTask","convertedTask","map","replaceIfEqual","taskId","actionTask","Array","isArray","due_date","Date"],"mappings":"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","sourcesContent":["export default (state = {\n  myTasks: [], assignedTasks: [], completedTasks: []\n}, action) => {\n\n  const isMyTask = (taskOrTaskId) => {\n    debugger\n    if (taskOrTaskId.task) {\n      return taskOrTaskId.task.attributes.user.id === taskOrTaskId.task.attributes.owner.id\n    } else {\n      return state.myTasks.find(task => parseInt(task.id) === taskOrTaskId)\n    }\n  }\n\n  switch (action.type) {\n    case 'SET_TASKS':\n      const tasks = convertDates(action.tasks)\n      const assignedTasks = tasks.filter(task => task.type === \"assigned_task\")\n        .filter(task => task.relationships.user.data.id !== task.relationships.owner.data.id)\n        .filter(task => task.attributes.completed === false)\n      const myTasks = tasks.filter(task => task.type === \"task\")\n        .filter(task => task.attributes.completed === false)\n      const completedTasks = tasks.filter(task => task.attributes.completed === true)\n        .filter(task => task.type === \"task\")\n      return { myTasks, assignedTasks, completedTasks }\n    case 'ADD_TASK':\n      const newTask = convertDates(action.task)\n      if (isMyTask(action)) {\n        return { ...state, myTasks: [...state.myTasks, newTask] }\n      } else {\n        return { ...state, assignedTasks: [...state.assignedTasks, newTask] }\n      }\n    case 'UPDATE_TASK':\n      const convertedTask = convertDates(action.task)\n      if (isMyTask(action.task.attributes.id)) {\n        if (isMyTask(action.task)) {\n          debugger\n          const myTasks = state.myTasks.map(task => replaceIfEqual(task, convertedTask))\n          return { ...state, myTasks }\n        } else {\n          debugger\n\n          // delete from myTasks & add to assigned Tasks\n          const myTasks = state.myTasks.filter(task => parseInt(task.id) !== action.task.attributes.id)\n          return { ...state, myTasks, assignedTasks: [...state.assignedTasks, convertedTask] }\n        }\n      } else {\n        if (isMyTask(action.task)) {\n          debugger\n\n          //delete from assignedTasks & add to myTasks\n          const assignedTasks = state.assignedTasks.filter(task => task.id !== action.task.attributes.id)\n          return { ...state, assignedTasks, myTasks: [...state.myTasks, convertedTask] }\n        }\n        else {\n          debugger\n\n          const assignedTasks = state.assignedTasks.map(task => replaceIfEqual(task, convertedTask))\n          return { ...state, assignedTasks }\n        }\n      }\n    case 'COMPLETED_TASK':\n      if (isMyTask(action.task.attributes.id)) {\n        const myTasks = state.myTasks.filter(task => task.id !== action.task.id)\n        const completedTasks = [...state.completedTasks, action.task]\n        return { ...state, myTasks, completedTasks }\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => task.id !== action.task.id)\n        return { ...state, assignedTasks }\n      }\n    case 'DELETE_TASK':\n      if (isMyTask(action.taskId)) {\n        const myTasks = state.myTasks.filter(task => parseInt(task.id) !== action.taskId)\n        return { ...state, myTasks }\n      } else {\n        const assignedTasks = state.assignedTasks.filter(task => parseInt(task.id) !== action.taskId)\n        return { ...state, assignedTasks }\n      }\n    default:\n      return state\n  }\n}\n\nconst replaceIfEqual = (task, actionTask) => {\n  if (task.id === actionTask.id) {\n    return actionTask\n  } else {\n    return task\n  }\n}\n\nconst convertDates = (tasks) => {\n  if (Array.isArray(tasks)) {\n    return tasks.map(task => {\n      task.attributes.due_date = new Date(task.attributes.due_date)\n      return task\n    })\n  } else {\n    tasks.attributes.due_date = new Date(tasks.attributes.due_date)\n    return tasks\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}